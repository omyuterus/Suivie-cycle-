<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Mon suivi de cycle</title>

  <!-- ðŸ”¹ FAVICONS / BRANDMARK -->
  <!-- Remplace simplement les fichiers par les tiens -->
  <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <!-- Manifest pour raccourci Ã©cran -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#a74d5e">

  <style>
    :root{
      --bg:#fbf7f4;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --accent:#a74d5e;
      --accent2:#93b087;
      --accent3:#244135;
      --border:#eadfd7;
      --shadow:0 10px 30px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto;
      background:var(--bg);
      color:var(--text);
    }
    header{
      max-width:1100px;
      margin:auto;
      padding:20px;
    }
    h1{margin:0;font-size:22px}
    .badge{
      display:inline-block;
      margin-top:6px;
      font-size:12px;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background:#fff;
      color:var(--muted);
    }
    main{
      max-width:1100px;
      margin:auto;
      padding:16px;
      display:grid;
      grid-template-columns:1.1fr .9fr;
      gap:16px;
    }
    @media(max-width:900px){main{grid-template-columns:1fr}}
    .card{
      background:#fff;
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:16px;
      box-shadow:var(--shadow);
    }
    h2{margin-top:0;color:var(--accent3)}
    label{font-size:13px;color:var(--muted)}
    input,select,textarea,button{
      width:100%;
      padding:12px;
      margin-top:6px;
      border-radius:14px;
      border:1px solid var(--border);
      font-size:14px;
    }
    textarea{resize:vertical}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:600px){.row{grid-template-columns:1fr}}
    button{
      cursor:pointer;
      font-weight:700;
      border:none;
    }
    .btn-primary{background:var(--accent);color:#fff}
    .btn-secondary{background:#93b08733;color:var(--accent3)}
    .note{
      background:#93b08722;
      border:1px dashed #93b087;
      padding:12px;
      border-radius:14px;
      font-size:13px;
      margin-bottom:12px;
    }
    .note2{
      background:#a74d5e22;
      border:1px dashed #a74d5e;
      padding:12px;
      border-radius:14px;
      font-size:13px;
      margin-bottom:12px;
    }
    .pill{
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#fff;
      font-size:12px;
      margin:2px;
    }
    .divider{height:1px;background:#eadfd7;margin:12px 0}
  </style>
</head>

<body>

<header>
  <h1>ðŸŒ™ Mon suivi de cycle</h1>
  <div class="badge">Confidentiel â€¢ enregistrÃ© sur ton appareil</div>
</header>

<main>

<!-- ðŸ©¸ SUIVI DU MOIS -->
<section class="card">
  <h2>ðŸ“… Mon mois</h2>

  <div class="note">
    Tu peux modifier ce mois quand tu veux.  
    Le but est dâ€™apprendre Ã  comprendre ton corps, pas dâ€™Ãªtre parfaite.
  </div>

  <label>Mois</label>
  <input type="month" id="month">

  <div class="row">
    <div>
      <label>DÃ©but des rÃ¨gles</label>
      <input type="date" id="startDate">
    </div>
    <div>
      <label>Fin des rÃ¨gles</label>
      <input type="date" id="endDate">
    </div>
  </div>

  <div class="row">
    <div>
      <label>Flux</label>
      <select id="flow">
        <option value="">â€”</option>
        <option>lÃ©ger</option>
        <option>moyen</option>
        <option>abondant</option>
      </select>
    </div>
    <div>
      <label>Caillots</label>
      <select id="clots">
        <option value="">â€”</option>
        <option>non</option>
        <option>oui</option>
      </select>
    </div>
  </div>

  <label>
    <input type="checkbox" id="ramadan"> Jâ€™ai eu mes rÃ¨gles pendant Ramadan
  </label>

  <button class="btn-secondary" onclick="saveMonth()">Enregistrer le mois</button>

  <div id="monthRecap" class="note2"></div>
</section>

<!-- ðŸŒ¿ CONSEILS + RAMADAN -->
<aside class="card">
  <h2>ðŸŒ¿ Mes solutions</h2>

  <div class="note">
    <b>Douleur immÃ©diate :</b><br>
    â€¢ Bouillotte / chaleur<br>
    â€¢ Positions repliÃ©es<br>
    â€¢ Respiration lente<br>
  </div>

  <div class="note2">
    <b>Camomille â€¢ MÃ©lisse â€¢ Verveine</b><br>
    Infusion 5â€“10 min â€¢ 1 tasse le soir<br>
    Semaine avant les rÃ¨gles
  </div>

  <div class="note">
    <b>Djeka / KhamarÃ©</b><br>
    â€¢ Rincer â€¢ Bouillir 10 min<br>
    â€¢ 1 tasse/jour autour de lâ€™ovulation (3 jours)<br>
    â€¢ 1 tasse dÃ¨s la douleur pendant les rÃ¨gles<br>
    â€¢ RÃ©utilisable 2 fois
  </div>

  <div class="divider"></div>

  <h2>ðŸŒ™ Ramadan â€“ rattrapage</h2>

  <div id="ramadanRecap" class="note"></div>

  <button class="btn-primary" onclick="addRamadanDay()">+1 jour rattrapÃ©</button>
</aside>

</main>

<script>
/* ================= DONNÃ‰ES ================= */
const LS_MONTH = "cycle_month_v1";
const LS_RAMADAN = "ramadan_progress_v1";

/* ================= MOIS ================= */
function saveMonth(){
  const data = {
    month: month.value,
    start: startDate.value,
    end: endDate.value,
    flow: flow.value,
    clots: clots.value,
    ramadan: ramadan.checked
  };
  localStorage.setItem(LS_MONTH, JSON.stringify(data));
  renderMonth();
}

function daysBetween(a,b){
  if(!a||!b) return 0;
  return Math.max(0,(new Date(b)-new Date(a))/(1000*60*60*24)+1);
}

function renderMonth(){
  const m = JSON.parse(localStorage.getItem(LS_MONTH)||"{}");
  if(!m.month) return;

  const days = daysBetween(m.start,m.end);
  monthRecap.innerHTML = `
    <span class="pill">ðŸ©¸ ${days} jours</span>
    <span class="pill">ðŸ’§ ${m.flow||"â€”"}</span>
    <span class="pill">ðŸŒ™ Ramadan : ${m.ramadan?"oui":"non"}</span>
  `;
  renderRamadan();
}

/* ================= RAMADAN ================= */
function getRamadan(){
  return JSON.parse(localStorage.getItem(LS_RAMADAN)||'{"done":0}');
}
function addRamadanDay(){
  const r = getRamadan();
  r.done += 1;
  localStorage.setItem(LS_RAMADAN, JSON.stringify(r));
  renderRamadan();
}
function renderRamadan(){
  const m = JSON.parse(localStorage.getItem(LS_MONTH)||"{}");
  const r = getRamadan();
  const total = m.ramadan ? daysBetween(m.start,m.end) : 0;
  const left = Math.max(0,total - r.done);

  ramadanRecap.innerHTML = `
    <span class="pill">Ã€ rattraper : ${total}</span>
    <span class="pill">RattrapÃ©s : ${r.done}</span>
    <span class="pill">Restants : ${left}</span>
  `;
}

/* ================= INIT ================= */
const month = document.getElementById("month");
const startDate = document.getElementById("startDate");
const endDate = document.getElementById("endDate");
const flow = document.getElementById("flow");
const clots = document.getElementById("clots");
const ramadan = document.getElementById("ramadan");
const monthRecap = document.getElementById("monthRecap");
const ramadanRecap = document.getElementById("ramadanRecap");

const now = new Date();
month.value = now.toISOString().slice(0,7);

renderMonth();
</script>

</body>
</html>
