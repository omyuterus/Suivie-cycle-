<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mon suivi de cycle</title>

  <style>
    :root{
      --bg:#fbf7f4;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --accent:#a74d5e;
      --accent2:#93b087;
      --accent3:#244135;
      --border:#eadfd7;
      --shadow:0 10px 30px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto;
      background:var(--bg);
      color:var(--text);
    }
    header{
      max-width:1100px;
      margin:auto;
      padding:20px;
    }
    h1{margin:0;font-size:22px}
    .badge{
      display:inline-block;
      margin-top:6px;
      font-size:12px;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background:#fff;
      color:var(--muted);
    }
    main{
      max-width:1100px;
      margin:auto;
      padding:16px;
      display:grid;
      grid-template-columns:1.1fr .9fr;
      gap:16px;
    }
    @media(max-width:900px){main{grid-template-columns:1fr}}
    .card{
      background:#fff;
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:16px;
      box-shadow:var(--shadow);
      margin-bottom: 16px;
    }
    h2{margin-top:0;color:var(--accent3);font-size: 18px;}
    label{font-size:13px;color:var(--muted);display:block;margin-top:10px;}
    input,select,textarea,button{
      width:100%;
      padding:12px;
      margin-top:6px;
      border-radius:14px;
      border:1px solid var(--border);
      font-size:14px;
    }
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:600px){.row{grid-template-columns:1fr}}
    button{cursor:pointer;font-weight:700;border:none;}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-secondary{background:#93b08733;color:var(--accent3)}
    .note{background:#93b08722;border:1px dashed #93b087;padding:12px;border-radius:14px;font-size:13px;margin-bottom:12px;}
    .note2{background:#a74d5e22;border:1px dashed #a74d5e;padding:12px;border-radius:14px;font-size:13px;margin-bottom:12px;}
    .pill{display:inline-block;padding:4px 10px;border-radius:999px;border:1px solid var(--border);background:#fff;font-size:12px;margin:2px;}
    .divider{height:1px;background:#eadfd7;margin:12px 0}
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;}
    .chip{display:flex;align-items:center;gap:6px;padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer;font-size:13px;}
    .chip input{width:auto;margin:0;}
  </style>
</head>

<body>

<header>
  <h1>ðŸŒ™ Mon suivi de cycle</h1>
  <div class="badge">Confidentiel â€¢ enregistrÃ© sur ton appareil</div>
</header>

<main>

<section>
  <div class="card">
    <h2>ðŸ“… Mon mois</h2>
    <div class="note">Ã‰coute ton corps, sans pression.</div>

    <label>Mois</label>
    <input type="month" id="month">

    <div class="row">
      <div><label>DÃ©but des rÃ¨gles</label><input type="date" id="startDate"></div>
      <div><label>Fin des rÃ¨gles</label><input type="date" id="endDate"></div>
    </div>

    <label>IntensitÃ© du flux</label>
    <select id="flow">
      <option value="">Choisir...</option>
      <option>LÃ©ger</option>
      <option>Moyen</option>
      <option>Abondant</option>
    </select>

    <label>Douleurs (0 = rien, 10 = fort)</label>
    <input type="range" id="painScale" min="0" max="10" value="0" style="padding:0">
    <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--muted)">
      <span>Aucune</span><span>5</span><span>Max</span>
    </div>

    <label>OÃ¹ as-tu eu mal ?</label>
    <div class="chips">
      <label class="chip"><input type="checkbox" name="painWhere" value="Bas-ventre"> Bas-ventre</label>
      <label class="chip"><input type="checkbox" name="painWhere" value="Dos"> Dos</label>
      <label class="chip"><input type="checkbox" name="painWhere" value="Jambes"> Entre les jambes</label>
    </div>

    <label>Humeur (semaine avant)</label>
    <div class="chips">
      <label class="chip"><input type="checkbox" name="mood" value="StressÃ©e"> ðŸ˜µ StressÃ©e</label>
      <label class="chip"><input type="checkbox" name="mood" value="FatiguÃ©e"> ðŸ˜´ FatiguÃ©e</label>
      <label class="chip"><input type="checkbox" name="mood" value="Irritable"> ðŸ˜¤ Irritable</label>
      <label class="chip"><input type="checkbox" name="mood" value="Sensible"> ðŸ¥º Sensible</label>
    </div>

    <div style="margin-top:15px;">
      <label><input type="checkbox" id="ramadan"> RÃ¨gles pendant le Ramadan</label>
    </div>

    <button class="btn-secondary" style="margin-top:15px;" onclick="saveMonth()">Enregistrer ce mois âœ¨</button>
  </div>

  <div class="card" id="recapSection" style="display:none;">
    <h2>ðŸ“Š RÃ©sumÃ© du mois</h2>
    <div id="monthRecap" class="note2"></div>
  </div>
</section>

<aside>
  <div class="card">
    <h2>ðŸŒ¿ Mes solutions</h2>
    <div class="note">
      <b>Douleurs :</b> Bouillotte, repos et respiration lente.
    </div>
    <div class="note2">
      <b>Infusions :</b> Camomille, MÃ©lisse ou Verveine le soir (semaine avant).
    </div>
    <div class="note">
      <b>Djeka / KhamarÃ© :</b> 1 tasse/jour autour de l'ovulation ou dÃ¨s la douleur.
    </div>
  </div>

  <div class="card">
    <h2>ðŸŒ™ Ramadan - Rattrapage</h2>
    <div id="ramadanRecap" class="note">Remplis tes dates de rÃ¨gles pour voir ton suivi.</div>
    <button class="btn-primary" onclick="addRamadanDay()">+1 jour rattrapÃ©</button>
  </div>
</aside>

</main>

<script>
const LS_MONTH = "cycle_month_v2";
const LS_RAMADAN = "ramadan_done_v2";

function saveMonth(){
  const painChecked = Array.from(document.querySelectorAll('input[name="painWhere"]:checked')).map(el => el.value);
  const moodChecked = Array.from(document.querySelectorAll('input[name="mood"]:checked')).map(el => el.value);

  const data = {
    month: document.getElementById("month").value,
    start: document.getElementById("startDate").value,
    end: document.getElementById("endDate").value,
    flow: document.getElementById("flow").value,
    pain: document.getElementById("painScale").value,
    painWhere: painChecked,
    mood: moodChecked,
    ramadan: document.getElementById("ramadan").checked
  };
  localStorage.setItem(LS_MONTH, JSON.stringify(data));
  renderAll();
  alert("C'est enregistrÃ© ! âœ¨");
}

function daysBetween(a,b){
  if(!a||!b) return 0;
  const diff = (new Date(b)-new Date(a))/(1000*60*60*24)+1;
  return diff > 0 ? Math.round(diff) : 0;
}

function renderAll(){
  const m = JSON.parse(localStorage.getItem(LS_MONTH)||"{}");
  const rDone = parseInt(localStorage.getItem(LS_RAMADAN)||"0");
  
  if(m.month){
    document.getElementById("recapSection").style.display = "block";
    const days = daysBetween(m.start, m.end);
    document.getElementById("monthRecap").innerHTML = `
      <span class="pill">ðŸ©¸ ${days} jours</span>
      <span class="pill">âš¡ Douleur : ${m.pain}/10</span>
      <span class="pill">ðŸ’§ Flux ${m.flow||"â€”"}</span>
      <br><small>Localisation : ${m.painWhere?.join(', ') || 'â€”'}</small>
    `;

    const totalToCatch = m.ramadan ? days : 0;
    const left = Math.max(0, totalToCatch - rDone);
    document.getElementById("ramadanRecap").innerHTML = `
      <span class="pill">Ã€ rattraper : ${totalToCatch}</span>
      <span class="pill">RattrapÃ©s : ${rDone}</span>
      <span class="pill">Restants : ${left}</span>
    `;
  }
}

function addRamadanDay(){
  let rDone = parseInt(localStorage.getItem(LS_RAMADAN)||"0");
  rDone++;
  localStorage.setItem(LS_RAMADAN, rDone);
  renderAll();
}

// Initialisation
const now = new Date();
document.getElementById("month").value = now.toISOString().slice(0,7);
renderAll();
</script>

</body>
</html>
